<!DOCTYPE html>
<html>
<head>
  <style>
    /* Add some styling to position the button and chatbot container */
    .chatbot-button {
        position: fixed;
        bottom: 20px;
        left: 20px;
        padding: 20px;
    }
    .chatbot-container {
        display: none;
        position: fixed;
        bottom: 70px;
        left: 20px;
        background-color: white;
        padding: 20px;
        width: 300px;
        height: 400px;
        overflow: auto;
    }
  </style>
</head>
<body>
  <img class="chatbot-button" id="chatbot-button" src="{{ url_for('static', filename='wave.gif') }}" onclick="toggleChatbot()">
  <div class="chatbot-container" id="chatbot-container">
    <div id="chatbot-messages">
      <p>Hello, I am your chatbot. How can I help you today?</p>
    </div>
    <form>
      <input type="text" id="user-input" placeholder="Type your message here...">
      <input type="button" value="Send" onclick="sendMessage()">
    </form>
  </div>
  <script>
    var chatbotButton = document.getElementById("chatbot-button");
    var chatbotContainer = document.getElementById("chatbot-container");
    var userInput = document.getElementById("user-input");

    function toggleChatbot() {
        chatbotContainer.style.display = (chatbotContainer.style.display == "block") ? "none" : "block";
        chatbotButton.src = (chatbotButton.src.includes("wave.gif")) ? "{{ url_for('static', filename='chat.gif') }}" : "{{ url_for('static', filename='wave.gif') }}";
    }

    function sendMessage() {
        // Send a post request to the Flask route that handles the chatbot functionality
        fetch('/chatbot', {
            method: 'POST',
            body: JSON.stringify({'user_input': userInput.value}),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            // Append the chatbot's response to the chatbot-messages div
            var messages = document.getElementById("chatbot-messages");
            messages.innerHTML += "<p>" + data.response + "</p>";
            // Clear the user input field
            userInput.value = "";
        });
    }
  </script>
</body>
</html>
